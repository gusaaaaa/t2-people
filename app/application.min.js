define("application",[],function(){var e=Ember.Application.create(),t=/localhost/.test(document.location.href),n=/authentication_token=([a-zA-Z0-9]+)/;if(n.test(document.location.href)){var r=document.location.href.match(n),i;i="authentication_token="+r[1],i+="; expires="+(new Date(2100,0)).toUTCString(),document.cookie=i,document.location.href=document.location.href.replace(n,"");return}return n.test(document.cookie)&&(e.AUTH_TOKEN=document.cookie.match(n)[1]),t?e.API_HOST="http://localhost:5000":e.API_HOST="http://t2api.herokuapp.com",e.API_BASE_URL=e.API_HOST+"/api/v1",e.SIGN_IN_URL=e.API_HOST+"/sign_in?return_url="+escape(location.href),e.NAVBAR_URL=e.API_HOST+"/navbar",window.App=e,e}),define("helpers",["application"],function(e){e.Raw2EmberObject=function(t){for(var n in t)t.hasOwnProperty(n)&&(Ember.typeOf(t[n])==="object"?t[n]=e.Raw2EmberObject(t[n]):Ember.typeOf(t[n])==="array"&&(t[n]=t[n].map(e.Raw2EmberObject)));return Ember.typeOf(t)=="object"&&(t=Ember.Object.create(t)),t}}),define("views/search_people",["application"],function(e){e.SearchPeopleView=Ember.View.extend({actions:{search:function(){var e=encodeURIComponent(this.get("keyword"));this.get("controller").send("search",e)}},templateName:"views/search_people",keyword:""})}),define("routes/application_route",["application","views/search_people"],function(e){e.ApplicationRoute=Ember.Route.extend({actions:{search:function(e){this.transitionTo("search",e)}},init:function(){e.AUTH_TOKEN||(document.location.href=e.SIGN_IN_URL),$.ajaxPrefilter(function(t){t.headers=t.headers||{},t.headers.Authorization=e.AUTH_TOKEN}),$(document).ajaxError(function(t,n){n.status===401&&(document.location.href=e.SIGN_IN_URL)})}})}),define("controllers/profile_controller",["application"],function(e){e.ProfileController=Ember.Controller.extend({init:function(){this.set("editingSkills",!1)},personData:function(){var e=this.get("person").getProperties(["name","title","bio","website","github","twitter","skill_list"]);return Ember.Object.create(e)}.property("person"),editable:!0})}),define("models/person",["application"],function(e){e.Person={}}),define("views/edit_profile_modal",["application"],function(e){e.EditProfileModalView=Ember.View.extend({actions:{save:function(){var t=this,n=t.get("controller"),r=t.get("controller.personData"),i=["name","title","bio","website","github","twitter"],s=r.getProperties(i),o=new FormData;i.forEach(function(e){o.append("person["+e+"]",s[e])});var u=t.$("input[type=file]")[0].files[0];o.append("person[avatar]",u||null),$.ajax({url:e.API_BASE_URL+"/profile",type:"put",data:o,contentType:!1,processData:!1}).done(function(e){n.set("person",Ember.Object.create(e.person)),t.$("#edit_profile_modal").modal("hide")})}},templateName:"views/edit_profile_modal"})}),define("views/editable_skill_list",["application"],function(e){e.EditableSkillList=Ember.View.extend({templateName:"views/editable_skill_list",actions:{save:function(t){var n=this.get("controller"),r=n.get("personData");r.get("skill_list").addObject(t),$.ajax({url:e.API_BASE_URL+"/profile",type:"put",data:{person:{skill_list:r.get("skill_list")}}}).done(function(e){n.set("person",Ember.Object.create(e.person)),r.set("newSkill","")})},destroy:function(t){var n=this.get("controller.person"),r=this.get("controller");n.get("skill_list").removeObject(t),$.ajax({url:e.API_BASE_URL+"/profile",type:"put",data:{person:{skill_list:n.get("skill_list").toArray()}}}).done(function(e){r.set("person",Ember.Object.create(e.person))})},turnOnEditableSkills:function(){return this.set("editingSkills",!0),!1},turnOffEditableSkills:function(){return this.set("editingSkills",!1),!1}},didInsertElement:function(){var e=this,t=this.get("controller.person.skill_list").map(function(e,t){return{text:e,id:e}}),n=this.get("controller.skills").map(function(e,t){return{text:e.name,id:e.name}});this.$("#inputSkills").select2({tags:n}).select2("data",t).on("change",function(t){return t.added?e.send("save",t.added.text):t.removed&&e.send("destroy",t.removed.text),!0})},submit:function(){return this.send("save"),!1},onSkillChanged:function(){this.send("save",this.get("newSkillValue"))}.observes("newSkillValue")})}),define("views/similar_people_list",["application"],function(e){e.SimilarPeopleList=Ember.View.extend({templateName:"views/similar_people_list"})}),define("views/profile",["application","views/edit_profile_modal","views/editable_skill_list"],function(e){e.ProfileView=Ember.View.extend({templateName:"views/profile",emailLink:function(){return"mailto:"+this.get("controller.person.email")}.property("controller.person.email"),githubLink:function(){return"http://github.com/"+this.get("controller.person.github")}.property("controller.person.github"),twitterLink:function(){return"http://twitter.com/"+this.get("controller.person.twitter")}.property("controller.person.twitter"),websiteLink:function(){var e=this.get("controller.person.website");return!!e&&e.indexOf("http")==-1&&(e="http://"+e),e}.property("controller.person.website")})}),define("routes/profile_route",["application","controllers/profile_controller","models/person","views/edit_profile_modal","views/editable_skill_list","views/similar_people_list","views/profile"],function(e){e.ProfileRoute=Ember.Route.extend({model:function(){return Ember.RSVP.hash({person:$.get(e.API_BASE_URL+"/people/"+e.AUTH_TOKEN+"/profile"),skills:$.get(e.API_BASE_URL+"/skills")})},setupController:function(e,t){e.set("person",Ember.Object.create(t.person.person)),e.set("skills",t.skills)}})}),define("controllers/skills_controller",["application"],function(e){e.SkillsController=Ember.Controller.extend({appliedSkillFilters:[],onAppliedSkillFiltersChange:function(){this.get("appliedSkillFilters.length")===0?this.set("skillFilters",this.get("skills")):this.set("skillFilters",this.get("appliedSkillFilters"))}.observes("appliedSkillFilters.[]"),people:function(){var e=[];return this.get("skillFilters").forEach(function(t){t.get("people").forEach(function(t){e.filterBy("id",t.get("id")).length||e.addObject(t)})}),e}.property("skillFilters.[]")})}),define("views/skills",["application"],function(e){e.SkillsView=Ember.View.extend({actions:{removeSkillFilter:function(e){this.get("controller.appliedSkillFilters").removeObject(e)}},didInsertElement:function(){this.$("select").select2()},onSkillFilterChanged:function(){var e=this.get("controller.newSkillFilter");if(!e)return;this.get("controller.appliedSkillFilters").addObject(e),this.$("select").select2("val","")}.observes("controller.newSkillFilter")})}),define("routes/skills_route",["application","controllers/skills_controller","views/skills"],function(e){e.SkillsRoute=Ember.Route.extend({model:function(){return $.get(e.API_BASE_URL+"/skills")},setupController:function(t,n){var r=n.map(e.Raw2EmberObject);t.set("skills",r),t.set("skillFilters",r)}})}),define("controllers/search_controller",["application"],function(e){e.SearchController=Ember.Controller.extend({filteredPeople:function(){var e=this.get("keyword");return this.get("people").filter(function(t){return t.get("name").toLowerCase().indexOf(e)!=-1})}.property("people")})}),define("views/search_people_item",["application"],function(e){e.SearchPeopleItemView=Ember.View.extend({templateName:"views/search_people_item",commaSeparatedSkills:function(){return this.get("person.skill_list").join(", ")}.property("person.skill_list"),twitterUrl:function(){return"http://twitter.com/"+this.get("person.twitter")}.property("person.twitter"),githubUrl:function(){return"http://github.com/"+this.get("person.github")}.property("person.github"),websiteUrl:function(){var e=this.get("person.website");return!!e&&e.indexOf("http")!=0&&(e="http://"+e),e}.property("person.website"),emailUrl:function(){return"mailto://"+this.get("person.email")}.property("person.email")})}),define("routes/search_route",["application","controllers/search_controller","views/search_people_item"],function(e){e.SearchRoute=Ember.Route.extend({model:function(t){return Ember.RSVP.hash({keyword:decodeURIComponent(t.keyword),people:$.get(e.API_BASE_URL+"/people")})},setupController:function(t,n){t.setProperties({keyword:n.keyword,people:n.people.people.map(e.Raw2EmberObject)})}})}),define("controllers/neon_controller",["application"],function(){App.NeonController=Ember.Controller.extend({})}),define("routes/neon_route",["application","controllers/neon_controller"],function(e){e.NeonRoute=Ember.Route.extend({model:function(t){return Ember.RSVP.hash({skills:$.get(e.API_BASE_URL+"/skills"),person:$.get(e.API_BASE_URL+"/people/"+t.neon)})},setupController:function(t,n){t.set("person",e.Raw2EmberObject(n.person.person)),t.set("skills",n.skills)}})}),define("router",["application","helpers","routes/application_route","routes/profile_route","routes/skills_route","routes/search_route","routes/neon_route"],function(e){e.Router.map(function(){this.resource("profile",{path:"/"}),this.resource("skills",{path:"/skills"}),this.resource("search",{path:"/search/:keyword"}),this.resource("neon",{path:"/neon/:neon"})})});